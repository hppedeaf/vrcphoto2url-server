<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Server File Manager - Client</title>
    <link rel="stylesheet" href="{{ url_for('static', path='css/client.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <p>Loading Client Interface...</p>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-gradient">
            <div class="header-content">
                <div class="title-section">
                    <h1>🏠 Custom Server File Manager</h1>
                    <p>Upload files to your server • Auto-upload photos • Auto-resize • Share anywhere</p>
                </div>
                <div class="controls-section">
                    <div class="status-section">
                        <div class="connection-status" id="connection-status">
                            <span class="status-icon">❌</span>
                            <span class="status-text">Not Connected</span>
                        </div>
                        <div class="monitoring-status" id="monitoring-status">
                            <span class="status-icon">📁</span>
                            <span class="status-text">Not Monitoring</span>
                        </div>
                    </div>
                    <div class="button-group">
                        <button class="header-btn" id="connect-btn">
                            <span class="btn-icon">🔗</span>
                            <span class="btn-text">Connect</span>
                        </button>
                        <button class="header-btn" id="monitor-btn" disabled>
                            <span class="btn-icon">🔍</span>
                            <span class="btn-text">Monitor</span>
                        </button>
                        <button class="header-btn" id="settings-btn">
                            <span class="btn-icon">⚙️</span>
                            <span class="btn-text">Settings</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="content-container">
            <!-- Upload Panel -->
            <div class="upload-panel">
                <div class="panel-header">
                    <h2>📤 Upload Files</h2>
                </div>

                <!-- Drop Zone -->
                <div class="drop-zone" id="drop-zone">
                    <div class="drop-zone-content">
                        <div class="drop-icon">📁</div>
                        <div class="drop-text">Drag photos here or click to browse</div>
                        <div class="drop-hint">Supports: JPG, PNG, GIF, WEBP and more</div>
                    </div>
                    <input type="file" id="file-input" multiple accept="image/*,video/*,audio/*,.pdf,.txt,.doc,.docx" style="display: none;">
                </div>

                <!-- Upload Controls -->
                <div class="upload-controls">
                    <button class="control-btn primary" id="browse-btn">
                        <span class="btn-icon">📁</span>
                        <span class="btn-text">Browse Files</span>
                    </button>
                    <button class="control-btn secondary" id="add-folder-btn" disabled>
                        <span class="btn-icon">📂</span>
                        <span class="btn-text">Add Folder to Monitor</span>
                    </button>
                </div>

                <!-- Progress Section -->
                <div class="progress-section" id="progress-section" style="display: none;">
                    <div class="progress-header">
                        <h3>⏳ Upload Progress</h3>
                    </div>
                    <div class="progress-content">
                        <div class="progress-label" id="progress-label">Preparing...</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <div class="progress-percentage" id="progress-percentage">0%</div>
                    </div>
                </div>

                <!-- Upload Status -->
                <div class="upload-status" id="upload-status"></div>
            </div>

            <!-- Activity Panel -->
            <div class="activity-panel">
                <!-- Tabs -->
                <div class="tab-header">
                    <button class="tab-btn active" data-tab="activity">📋 Activity</button>
                    <button class="tab-btn" data-tab="files">📁 Files</button>
                    <button class="tab-btn" data-tab="stats">📊 Statistics</button>
                </div>

                <!-- Activity Tab -->
                <div class="tab-content active" id="activity-tab">
                    <div class="tab-panel">
                        <h3>📋 Activity Log</h3>
                        <div class="activity-log" id="activity-log">
                            <div class="activity-item">
                                <span class="activity-time">Ready</span>
                                <span class="activity-text">🌟 Client interface loaded successfully</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Files Tab -->
                <div class="tab-content" id="files-tab">
                    <div class="tab-panel">
                        <h3>📁 Recent Files</h3>
                        <div class="files-list" id="files-list">
                            <div class="files-empty">
                                <span class="empty-icon">📁</span>
                                <span class="empty-text">No files uploaded yet</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Statistics Tab -->
                <div class="tab-content" id="stats-tab">
                    <div class="tab-panel">
                        <h3>📊 Upload Statistics</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">📤</div>
                                <div class="stat-value" id="total-uploads">0</div>
                                <div class="stat-label">Total Uploads</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">💾</div>
                                <div class="stat-value" id="total-size">0 B</div>
                                <div class="stat-label">Total Size</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">✅</div>
                                <div class="stat-value" id="success-rate">100%</div>
                                <div class="stat-label">Success Rate</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">⚡</div>
                                <div class="stat-value" id="avg-speed">0 MB/s</div>
                                <div class="stat-label">Avg Speed</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Connection Modal -->
    <div id="connection-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>🔗 Connect to Server</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="connection-form">
                    <div class="form-group">
                        <label for="server-url">Server URL</label>
                        <input type="url" id="server-url" placeholder="http://localhost:8000" required>
                    </div>
                    <div class="form-group">
                        <label for="api-key">API Key (Optional)</label>
                        <input type="password" id="api-key" placeholder="Enter API key if required">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="remember-connection">
                            Remember connection settings
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn secondary" id="test-connection-btn">Test Connection</button>
                        <button type="submit" class="btn primary">Connect</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>⚙️ Settings</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>📤 Auto Upload Settings</h3>
                    <label class="setting-item">
                        <input type="checkbox" id="auto-upload-enabled" checked>
                        <span>Enable auto-upload for new photos</span>
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="auto-clipboard" checked>
                        <span>Auto-copy URLs to clipboard</span>
                    </label>
                </div>
                
                <div class="settings-section">
                    <h3>🖼️ Image Processing</h3>
                    <label class="setting-item">
                        <input type="checkbox" id="auto-resize">
                        <span>Auto-resize large images</span>
                    </label>
                    <div class="setting-item">
                        <label for="max-resolution">Maximum resolution (px)</label>
                        <input type="number" id="max-resolution" value="2048" min="512" max="4096">
                    </div>
                </div>

                <div class="settings-section">
                    <h3>🎨 Theme Settings</h3>
                    <div class="color-presets">
                        <button class="preset-btn" data-preset="green">🟢 Green</button>
                        <button class="preset-btn" data-preset="blue">🔵 Blue</button>
                        <button class="preset-btn" data-preset="purple">🟣 Purple</button>
                        <button class="preset-btn" data-preset="orange">🟠 Orange</button>
                    </div>
                </div>

                <div class="settings-actions">
                    <button type="button" class="btn secondary" id="reset-settings-btn">Reset to Defaults</button>
                    <button type="button" class="btn primary" id="save-settings-btn">Save Settings</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications -->
    <div id="notifications-container"></div>

    <script src="{{ url_for('static', path='js/client.js') }}"></script>
</body>
</html>
