<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VRCPhoto2URL - Working Client Interface</title>
    <link rel="stylesheet" href="{{ url_for('static', path='css/client.css') }}">
</head>
<body>
    <div id="loading-screen" class="loading-screen" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Loading Client Interface...</p>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-gradient">
            <div class="header-content">
                <div class="title-section">
                    <h1>🏠 Custom Server File Manager</h1>
                    <p>Upload files to your server • Auto-upload photos • Auto-resize • Share anywhere</p>
                </div>
                <div class="controls-section">
                    <div class="status-section">
                        <div class="connection-status" id="connection-status">
                            <span class="status-icon">❌</span>
                            <span class="status-text">Not Connected</span>
                        </div>
                        <div class="monitoring-status" id="monitoring-status">
                            <span class="status-icon">📁</span>
                            <span class="status-text">Not Monitoring</span>
                        </div>
                    </div>
                    <div class="button-group">
                        <button class="header-btn" id="connect-btn" onclick="handleConnectClick()">
                            <span class="btn-icon">🔗</span>
                            <span class="btn-text">Connect</span>
                        </button>
                        <button class="header-btn" id="monitor-btn" onclick="handleMonitorClick()" disabled>
                            <span class="btn-icon">🔍</span>
                            <span class="btn-text">Monitor</span>
                        </button>
                        <button class="header-btn" id="settings-btn" onclick="handleSettingsClick()">
                            <span class="btn-icon">⚙️</span>
                            <span class="btn-text">Settings</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="content-container">
            <!-- Upload Panel -->
            <div class="upload-panel">
                <div class="panel-header">
                    <h2>📤 Upload Files</h2>
                </div>

                <!-- Drop Zone -->
                <div class="drop-zone" id="drop-zone" onclick="handleDropZoneClick()">
                    <div class="drop-zone-content">
                        <div class="drop-icon">📁</div>
                        <div class="drop-text">Drag photos here or click to browse</div>
                        <div class="drop-hint">Supports: JPG, PNG, GIF, WEBP and more</div>
                    </div>
                    <input type="file" id="file-input" multiple accept="image/*,video/*,audio/*,.pdf,.txt,.doc,.docx" style="display: none;">
                </div>

                <!-- Upload Controls -->
                <div class="upload-controls">
                    <button class="control-btn primary" id="browse-btn" onclick="handleBrowseClick()">
                        <span class="btn-icon">📁</span>
                        <span class="btn-text">Browse Files</span>
                    </button>
                    <button class="control-btn secondary" id="add-folder-btn" onclick="handleAddFolderClick()" disabled>
                        <span class="btn-icon">📂</span>
                        <span class="btn-text">Add Folder to Monitor</span>
                    </button>
                </div>

                <!-- Upload Status -->
                <div class="upload-status" id="upload-status"></div>
            </div>

            <!-- Activity Panel -->
            <div class="activity-panel">
                <!-- Tabs -->
                <div class="tab-header">
                    <button class="tab-btn active" data-tab="activity" onclick="switchToTab('activity')">📋 Activity</button>
                    <button class="tab-btn" data-tab="files" onclick="switchToTab('files')">📁 Files</button>
                    <button class="tab-btn" data-tab="stats" onclick="switchToTab('stats')">📊 Statistics</button>
                </div>

                <!-- Activity Tab -->
                <div class="tab-content active" id="activity-tab">
                    <div class="tab-panel">
                        <h3>📋 Activity Log</h3>
                        <div class="activity-log" id="activity-log">
                            <div class="activity-item">
                                <span class="activity-time">Ready</span>
                                <span class="activity-text">🌟 Client interface loaded successfully</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Files Tab -->
                <div class="tab-content" id="files-tab">
                    <div class="tab-panel">
                        <h3>📁 Recent Files</h3>
                        <div class="files-list" id="files-list">
                            <div class="files-empty">
                                <span class="empty-icon">📁</span>
                                <span class="empty-text">No files uploaded yet</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Statistics Tab -->
                <div class="tab-content" id="stats-tab">
                    <div class="tab-panel">
                        <h3>📊 Upload Statistics</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">📤</div>
                                <div class="stat-value" id="total-uploads">0</div>
                                <div class="stat-label">Total Uploads</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">💾</div>
                                <div class="stat-value" id="total-size">0 B</div>
                                <div class="stat-label">Total Size</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">✅</div>
                                <div class="stat-value" id="success-rate">100%</div>
                                <div class="stat-label">Success Rate</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">⚡</div>
                                <div class="stat-value" id="avg-speed">0 MB/s</div>
                                <div class="stat-label">Avg Speed</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Status Display for Testing -->
    <div style="position: fixed; bottom: 20px; right: 20px; background: #333; color: white; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px; max-width: 300px;" id="debug-status">
        Ready - Click buttons and tabs to test
    </div>

    <script>
        console.log('Working client interface loading...');
        
        function logToStatus(message) {
            const status = document.getElementById('debug-status');
            const activity = document.getElementById('activity-log');
            const timestamp = new Date().toLocaleTimeString();
            
            // Update debug status
            status.innerHTML = `${message}<br><small>${timestamp}</small>`;
            
            // Add to activity log
            const activityItem = document.createElement('div');
            activityItem.className = 'activity-item';
            activityItem.innerHTML = `
                <span class="activity-time">${timestamp}</span>
                <span class="activity-text">${message}</span>
            `;
            activity.insertBefore(activityItem, activity.firstChild);
            
            console.log(message);
        }
        
        function switchToTab(tabName) {
            logToStatus(`🔄 Switching to ${tabName} tab`);
            
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            logToStatus(`✅ Switched to ${tabName} tab successfully`);
        }
        
        function handleConnectClick() {
            logToStatus('🔗 Connect button clicked');
        }
        
        function handleMonitorClick() {
            logToStatus('🔍 Monitor button clicked');
        }
        
        function handleSettingsClick() {
            logToStatus('⚙️ Settings button clicked');
        }
        
        function handleBrowseClick() {
            logToStatus('📁 Browse button clicked');
            document.getElementById('file-input').click();
        }
        
        function handleAddFolderClick() {
            logToStatus('📂 Add folder button clicked');
        }
        
        function handleDropZoneClick() {
            logToStatus('📁 Drop zone clicked');
            document.getElementById('file-input').click();
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            logToStatus('🌟 Working client interface loaded successfully');
        });
        
        // Global click debugging
        document.addEventListener('click', (e) => {
            console.log('Global click:', e.target.tagName, e.target.className);
        });
        
        console.log('Working client script loaded');
    </script>
</body>
</html>
